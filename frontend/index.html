<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>KOL Entry Scanner BR - Trades ao Vivo | KOLScan Brasil</title>
<meta name="description" content="Acompanhe trades em tempo real de KOLs na Solana. PnL, Win Rate e anÃ¡lise IA com GPT-4o mini. Powered by Helius.">
<meta name="keywords" content="KOL, Solana, memecoins, trading, Helius, GPT-4, Brasil">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:wght@400;500;700&family=Bebas+Neue&family=DM+Sans:wght@400;500;700;800&display=swap" rel="stylesheet">
<link rel="stylesheet" href="css/design-tokens.css">
<link rel="stylesheet" href="css/main.css">
<link rel="stylesheet" href="css/components.css">
</head>
<body>
<div class="glc"></div><div class="glr"></div>
<div class="wrap">
<header role="banner">
<!-- BANNER SETUP (mostrar quando Helius nÃ£o configurado) -->
<div id="banner-setup" class="banner-setup" style="display:none" role="alert">
  <div class="banner-inner">
    <span>âš™ï¸ Configure <strong>HELIUS_API_KEY</strong> no Railway para trades em tempo real.</span>
    <small>Sem a key: wallets visÃ­veis, trades nÃ£o monitorados.</small>
  </div>
</div>

<!-- TOPBAR -->
<div class="topbar">
  <div class="logo">
    <div class="lhex">K</div>
    <div><h1>KOL ENTRY SCANNER</h1><p>KOLScan Brasil â€” Powered by Helius + GPT-4o mini</p></div>
  </div>
  <div class="trr">
    <div class="brlbox"><div><div class="bl">USD / BRL</div><div class="bv" id="brlVal">R$ 5,12</div><div class="bs" id="brlTime">â€”</div></div></div>
    <div class="ctog"><button id="btnBRL" class="active" onclick="setCur('BRL')">R$ BRL</button><button id="btnUSD" onclick="setCur('USD')">$ USD</button></div>
    <div class="livebadge" id="wsStatus" aria-live="polite" aria-label="Status da conexÃ£o"><div class="dot" id="wsDot"></div><span id="liveLabel">CONECTANDO...</span></div>
    <button class="cfg-btn" onclick="openSettingsModal()" title="ConfiguraÃ§Ãµes" aria-label="Abrir configuraÃ§Ãµes">âš™</button>
  </div>
</div>
</header>

<main role="main">
<!-- STATS -->
<div class="stats">
  <div class="stat s1"><div class="slbl">Wallets</div><div class="sval ca" id="stW">0</div></div>
  <div class="stat s2"><div class="slbl">PnL Total</div><div class="sval" id="stP">â€”</div><div class="ssub" id="stPs"></div></div>
  <div class="stat s3"><div class="slbl">Trades ao Vivo</div><div class="sval cy" id="stT">0</div></div>
  <div class="stat s4"><div class="slbl">Alertas Ativos</div><div class="sval cp" id="stA">0</div></div>
</div>

<nav class="tabs" role="navigation" aria-label="Abas principais">
  <button class="tab active" onclick="sw('wallets',this)">ğŸ“Š KOL Wallets</button>
  <button class="tab" onclick="sw('trades',this)">âš¡ Trades Ao Vivo <span class="tbadge" id="tBadge">0</span></button>
  <button class="tab" onclick="sw('alerts',this)">ğŸ”” Alertas <span id="aBadge" style="display:none;background:var(--red);color:#fff;border-radius:2px;font-size:9px;padding:1px 5px;font-weight:700">0</span></button>
</nav>

<!-- â•â•â• WALLETS â•â•â• -->
<div id="tab-wallets">
  <div class="controls">
    <div class="ig grow"><label>ğŸ” Buscar KOL / Wallet</label><input type="text" id="srch" placeholder="Nome, @handle ou endereÃ§o..." autocomplete="off" aria-label="Buscar KOL ou wallet"></div>
    <div class="ig"><label>PerÃ­odo</label><select id="pFil" onchange="onPeriodChange()"><option value="D">DiÃ¡rio</option><option value="W">Semanal</option><option value="M">Mensal</option></select></div>
    <button class="btn bg" onclick="forceRefreshPnL()" title="ForÃ§ar atualizaÃ§Ã£o de PnL">ğŸ”„ RECARREGAR WALLETS</button>
  </div>
  <div class="frow">
    <span class="flbl">Filtro:</span>
    <button class="chip active" onclick="setF('all',this)">Todos</button>
    <button class="chip" onclick="setF('top',this)">Top 10</button>
    <button class="chip" onclick="setF('wr80',this)">WR â‰¥ 80%</button>
    <button class="chip" onclick="setF('pnlpos',this)">PnL Positivo</button>
    <button class="chip" onclick="setF('alert',this)">Alerta ON</button>
  </div>
  <div class="twrap">
    <table>
      <thead><tr><th onclick="sb('rankPnl')">RANKâ†•</th><th onclick="sb('name')">KOLâ†•</th><th>WALLET</th><th onclick="sb('pnl')">PnLâ†•</th><th onclick="sb('winRate')">WIN RATEâ†•</th><th onclick="sb('trades')">TRADESâ†•</th><th>VOL 24H</th><th>ALERTA</th><th>VER</th></tr></thead>
      <tbody id="wBody"></tbody>
    </table>
    <div id="emptyW" class="empty" style="display:none" hidden aria-live="polite" aria-hidden="true"><div class="ei">â¬¡</div><p>Nenhuma wallet encontrada</p></div>
  </div>
</div>

<!-- â•â•â• TRADES â•â•â• -->
<div id="tab-trades" style="display:none">
  <div class="tlay">
    <div class="tfeed">
      <div class="tfhdr">
        <div class="tftitle"><span class="dot"></span>TRADES EM TEMPO REAL</div>
        <div class="tfc">
          <select id="ttFil" onchange="applyTFilter()"><option value="all">Compra + Venda</option><option value="buy">SÃ³ Compras</option><option value="sell">SÃ³ Vendas</option></select>
          <button class="btn br bsm" onclick="clearTrades()">LIMPAR</button>
        </div>
      </div>
      <div class="thead-t"><div>HORA</div><div>TOKEN</div><div>TIPO</div><div>VALOR</div><div>MARKET CAP</div><div>KOL</div><div>IDADE</div></div>
      <div id="tBody"></div>
      <div id="tEmpty" class="empty"><div class="ei">ğŸ“¡</div><p>Aguardando trades dos KOLs...</p></div>
    </div>
    <!-- TOKEN DETAIL PANEL -->
    <div class="tpanel" id="tokenPanel">
      <div class="tphdr"><div class="tptitle">DETALHE DO TOKEN</div><div class="tpsub">Clique em um trade para ver</div></div>
      <div id="tokDetail"><div class="tpempty detail-empty" id="tokDetailEmpty"><div class="ei">ğŸ“¡</div><h3>Aguardando trades</h3><p>Clique em um trade no feed para ver market cap, liquidez e anÃ¡lise IA.</p><small>Configure HELIUS_API_KEY no Railway para receber trades em tempo real.</small></div></div>
    </div>
  </div>
</div>

<!-- â•â•â• ALERTS â•â•â• -->
<div id="tab-alerts" style="display:none">
  <div class="alay">
    <div class="afeed">
      <div class="afhdr">
        <div class="aftitle">âš¡ FEED DE ALERTAS</div>
        <div style="display:flex;gap:6px">
          <button class="btn br bsm" onclick="clearAlerts()">LIMPAR</button>
        </div>
      </div>
      <div class="aflist" id="aList"><div class="noalert">Nenhum alerta â€” ative o rastreamento nas wallets</div></div>
    </div>
    <div class="cfgpanel">
      <div class="cfghdr">âš™ï¸ NOTIFICAÃ‡ÃƒO</div>
      <div class="cfgbody">
        <div class="cfgrow"><div class="cfglbl">Tipo</div><select class="iginput" id="cfgN"><option value="visual">Visual</option><option value="sound">Visual + Som</option></select></div>
        <div class="cfgrow"><button class="btn bg bsm" onclick="openSettingsModal()">âš™ï¸ Prompt IA (ANALISAR)</button></div>
      </div>
    </div>
  </div>
</div>

<div id="toast" class="toast" role="status" aria-live="polite" aria-atomic="true"></div>

</main>
</div><!-- /wrap -->

<!-- â•â•â• SETTINGS MODAL (Prompt IA, etc.) â•â•â• -->
<div class="moverlay" id="settingsOverlay" onclick="closeSettingsBg(event)">
  <div class="modal" onclick="event.stopPropagation()">
    <button class="mx" onclick="closeSettingsModal()">âœ•</button>
    <div class="mtitle">CONFIGURAÃ‡Ã•ES</div>
    <div class="msub">Prompt IA usado no botÃ£o ANALISAR</div>
    <div class="mrow">
      <label>Prompt IA Personalizado</label>
      <textarea id="aiPrompt" rows="5" placeholder="Ex: priorize narrativas de curto prazo, risco de rug, liquidez" style="background:var(--surface);border:1px solid var(--border);color:var(--text);font-family:var(--mono);font-size:12px;padding:9px;outline:none;width:100%;resize:vertical;min-height:80px"></textarea>
      <div style="font-family:var(--mono);font-size:9px;color:var(--muted2);margin-top:4px">Enviado junto para o GPT-4o mini ao clicar em ANALISAR.</div>
    </div>
    <div style="display:flex;gap:8px;margin-top:12px">
      <button class="btn bp" onclick="saveAIPrompt();closeSettingsModal()">SALVAR</button>
      <button class="btn by" onclick="resetAIPrompt()">RESETAR</button>
    </div>
  </div>
</div>

<!-- â•â•â• KOL MODAL â•â•â• -->
<div class="moverlay" id="kolOverlay" onclick="closeKbg(event)">
  <div class="kmodal">
    <button class="mx" onclick="closeKol()">âœ•</button>
    <div class="mtitle" id="kTitle"></div>
    <div class="msub" id="kSub"></div>
    <div class="msec2">ğŸ”” ALERTA DE ENTRY</div>
    <div style="display:flex;align-items:center;gap:10px;margin-bottom:14px">
      <button class="btn bsm" id="kABtn" onclick="togKA()" style="padding:7px 15px;font-size:11px;border:1px solid var(--green);color:var(--green);background:transparent">ATIVAR ALERTA</button>
      <span style="font-family:var(--mono);font-size:10px;color:var(--muted)">Notificar quando esta wallet fizer um trade</span>
    </div>
    <div class="mgrid" id="kStats"></div>
    <div class="msec2">ğŸ”— LINKS</div>
    <div class="kmlinks" id="kLinks"></div>
    <div class="msec2">ğŸ“Š ÃšLTIMAS 4 TRADES</div>
    <div class="kLastTrades" id="kLastTrades"></div>
  </div>
</div>


<script type="module" src="js/app.js"></script>

</body>
</html>
